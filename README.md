# FastFood Network - Система управления логистикой для сети ресторанов быстрого питания

## Описание предметной области

Современная сеть ресторанов быстрого питания **FastFood Network** управляет 50+ заведениями в разных городах. Система обеспечивает:
- Своевременную поставку продуктов
- Управление запасами
- Обработку заказов
- Контроль качества

### Ключевые бизнес-процессы
1. Прогнозирование потребности в ингредиентах
2. Заказ продуктов у поставщиков
3. Доставка на центральные склады и распределение
4. Контроль запасов и автоматическое пополнение
5. Управление меню
6. Обработка заказов посетителей
7. Мониторинг качества
8. Управление возвратами и утилизацией

**Цели системы**:
- Минимизация порчи продуктов
- Оптимизация запасов
- Контроль затрат
- Поддержание высокого качества обслуживания

---

## Единый язык (Ubiquitous Language)

### Основные сущности
| Термин                  | Описание                                                                 |
|-------------------------|--------------------------------------------------------------------------|
| **Ресторан**            | Точка продаж с кухней, зоной обслуживания и локальным складом           |
| **Центральный склад**   | Распределительный центр для поставок в рестораны                        |
| **Поставщик**           | Компания, поставляющая сырье и ингредиенты                              |
| **Продукт**             | Пищевой ингредиент (мясо, овощи, соусы)                                 |
| **Блюдо**               | Готовое изделие для заказа (бургер, картофель фри)                      |
| **Меню**                | Набор доступных для заказа блюд                                         |
| **Заказ поставщику**    | Запрос на поставку продуктов от склада поставщику                       |
| **Внутренний заказ**    | Запрос на поставку от ресторана к складу                                |
| **Клиентский заказ**    | Заказ, сделанный посетителем                                            |
| **Инвентаризация**      | Учет наличия и состояния продуктов                                      |
| **Прогноз**             | Предсказание потребностей в продуктах                                   |

### Бизнес-процессы
- **Прогнозирование** - расчет будущих потребностей
- **Заказ продуктов** - формирование заказов поставщикам
- **Приемка** - проверка доставленных продуктов
- **Распределение** - перемещение продуктов между ресторанами
- **Списание** - удаление испорченных продуктов
- **Корректировка запасов** - синхронизация системы с фактическим наличием
- **Составление меню** - разработка и обновление меню
- **Проверка качества** - контроль качества продуктов и блюд

### Атрибуты и статусы
- **Срок годности** - дата непригодности продукта
- **Температурный режим** - условия хранения
- **Статус заказа** - текущее состояние (создан, подтвержден, доставлен)
- **Минимальный запас** - нижний порог количества продукта
- **Оптимальный запас** - рекомендуемое количество
- **Критический уровень** - требующий срочного пополнения

---

## CQRS: Подсистема управления заказами в ресторане

Реализована подсистема управления заказами посетителей ресторана с использованием архитектурного подхода CQRS (Command Query Responsibility Segregation), обеспечивающего разделение операций изменения состояния и запросов данных.

### Функциональность
- Создание нового заказа
- Добавление блюд в заказ
- Изменение состава заказа
- Отслеживание статуса приготовления
- Завершение заказа
- Генерация различных представлений данных (статистика, отчеты, история заказов)

### Архитектурные компоненты

1. **Командная сторона (Command Side)**
   - Бизнес-логика для операций, изменяющих состояние
   - Модель заказа (`Order`) и элементы заказа (`OrderItem`)
   - Обработчики команд (`CommandHandler`) для создания, изменения и завершения заказов
   - Генерация событий для синхронизации с запросной стороной

2. **Запросная сторона (Query Side)**
   - Оптимизированная модель представления (`OrderView`) для запросов
   - Обработчик запросов (`QueryHandler`) для получения данных
   - Поддержка истории заказов и статистики (например, общее количество заказов, выручка)

3. **Механизм синхронизации**
   - Хранилище событий для фиксации изменений
   - События (`Event`) для передачи изменений от командной стороны к запросной
   - Асинхронное обновление моделей запросов на основе событий

### Принципы реализации
- Полное разделение ответственности между командной и запросной сторонами
- Независимые модели для команд (`Order`) и запросов (`OrderView`)
- Проверка бизнес-правил в обработчиках команд (например, валидность количества блюд, корректность переходов статуса)
- Событийная синхронизация для обеспечения согласованности данных
- Оптимизация моделей запросов для быстрого доступа к данным
- Гибкость для масштабирования и добавления новых типов запросов или команд
